var Sr=Object.defineProperty,Rr=Object.defineProperties;var Ir=Object.getOwnPropertyDescriptors;var We=Object.getOwnPropertySymbols;var Lr=Object.prototype.hasOwnProperty,zr=Object.prototype.propertyIsEnumerable;var Ne=(e,r,t)=>r in e?Sr(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,me=(e,r)=>{for(var t in r||(r={}))Lr.call(r,t)&&Ne(e,t,r[t]);if(We)for(var t of We(r))zr.call(r,t)&&Ne(e,t,r[t]);return e},He=(e,r)=>Rr(e,Ir(r));import{r as c,a as d,F as ir,R as ur,T as sr,j as P,a6 as z,l as T,a7 as cr,a8 as Br,a9 as Mr,aa as $r,C as Kr,V as ye,H as ve,ab as Wr}from"./index.2b4138e2.js";import{_ as B,e as M,f as Nr,u as te,c as lr,b as fr}from"./toast.6bee113f.js";import{I as Ve,B as pr}from"./chakra-ui-button.esm.311a4802.js";import{l as Ue}from"./functions.bac916fb.js";var dr={exports:{}},Hr="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Vr=Hr,Ur=Vr;function gr(){}function mr(){}mr.resetWarningCache=gr;var Yr=function(){function e(n,o,i,s,u,l){if(l!==Ur){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}}e.isRequired=e;function r(){return e}var t={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:r,element:e,elementType:e,instanceOf:r,node:e,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:mr,resetWarningCache:gr};return t.PropTypes=t,t};dr.exports=Yr();var g=dr.exports,Gr=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function W(e,r){var t=qr(e);if(typeof t.path!="string"){var n=e.webkitRelativePath;Object.defineProperty(t,"path",{value:typeof r=="string"?r:typeof n=="string"&&n.length>0?n:e.name,writable:!1,configurable:!1,enumerable:!0})}return t}function qr(e){var r=e.name,t=r&&r.lastIndexOf(".")!==-1;if(t&&!e.type){var n=r.split(".").pop().toLowerCase(),o=Gr.get(n);o&&Object.defineProperty(e,"type",{value:o,writable:!1,configurable:!1,enumerable:!0})}return e}var Jr=[".DS_Store","Thumbs.db"];function Qr(e){return B(this,void 0,void 0,function(){return M(this,function(r){return Z(e)&&Xr(e)?[2,tt(e.dataTransfer,e.type)]:Zr(e)?[2,et(e)]:Array.isArray(e)&&e.every(function(t){return"getFile"in t&&typeof t.getFile=="function"})?[2,rt(e)]:[2,[]]})})}function Xr(e){return Z(e.dataTransfer)}function Zr(e){return Z(e)&&Z(e.target)}function Z(e){return typeof e=="object"&&e!==null}function et(e){return be(e.target.files).map(function(r){return W(r)})}function rt(e){return B(this,void 0,void 0,function(){var r;return M(this,function(t){switch(t.label){case 0:return[4,Promise.all(e.map(function(n){return n.getFile()}))];case 1:return r=t.sent(),[2,r.map(function(n){return W(n)})]}})})}function tt(e,r){return B(this,void 0,void 0,function(){var t,n;return M(this,function(o){switch(o.label){case 0:return e===null?[2,[]]:e.items?(t=be(e.items).filter(function(i){return i.kind==="file"}),r!=="drop"?[2,t]:[4,Promise.all(t.map(nt))]):[3,2];case 1:return n=o.sent(),[2,Ye(yr(n))];case 2:return[2,Ye(be(e.files).map(function(i){return W(i)}))]}})})}function Ye(e){return e.filter(function(r){return Jr.indexOf(r.name)===-1})}function be(e){if(e===null)return[];for(var r=[],t=0;t<e.length;t++){var n=e[t];r.push(n)}return r}function nt(e){if(typeof e.webkitGetAsEntry!="function")return Ge(e);var r=e.webkitGetAsEntry();return r&&r.isDirectory?vr(r):Ge(e)}function yr(e){return e.reduce(function(r,t){return Nr(r,Array.isArray(t)?yr(t):[t])},[])}function Ge(e){var r=e.getAsFile();if(!r)return Promise.reject(e+" is not a File");var t=W(r);return Promise.resolve(t)}function ot(e){return B(this,void 0,void 0,function(){return M(this,function(r){return[2,e.isDirectory?vr(e):at(e)]})})}function vr(e){var r=e.createReader();return new Promise(function(t,n){var o=[];function i(){var s=this;r.readEntries(function(u){return B(s,void 0,void 0,function(){var l,p,y;return M(this,function(v){switch(v.label){case 0:if(u.length)return[3,5];v.label=1;case 1:return v.trys.push([1,3,,4]),[4,Promise.all(o)];case 2:return l=v.sent(),t(l),[3,4];case 3:return p=v.sent(),n(p),[3,4];case 4:return[3,6];case 5:y=Promise.all(u.map(ot)),o.push(y),i(),v.label=6;case 6:return[2]}})})},function(u){n(u)})}i()})}function at(e){return B(this,void 0,void 0,function(){return M(this,function(r){return[2,new Promise(function(t,n){e.file(function(o){var i=W(o,e.fullPath);t(i)},function(o){n(o)})})]})})}var it=function(e,r){if(e&&r){var t=Array.isArray(r)?r:r.split(","),n=e.name||"",o=(e.type||"").toLowerCase(),i=o.replace(/\/.*$/,"");return t.some(function(s){var u=s.trim().toLowerCase();return u.charAt(0)==="."?n.toLowerCase().endsWith(u):u.endsWith("/*")?i===u.replace(/\/.*$/,""):o===u})}return!0};function qe(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),t.push.apply(t,n)}return t}function Je(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?qe(Object(t),!0).forEach(function(n){hr(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):qe(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function hr(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Qe(e,r){return lt(e)||ct(e,r)||st(e,r)||ut()}function ut(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function st(e,r){if(!!e){if(typeof e=="string")return Xe(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Xe(e,r)}}function Xe(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function ct(e,r){var t=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var n=[],o=!0,i=!1,s,u;try{for(t=t.call(e);!(o=(s=t.next()).done)&&(n.push(s.value),!(r&&n.length===r));o=!0);}catch(l){i=!0,u=l}finally{try{!o&&t.return!=null&&t.return()}finally{if(i)throw u}}return n}}function lt(e){if(Array.isArray(e))return e}var ft="file-invalid-type",pt="file-too-large",dt="file-too-small",gt="too-many-files",mt=function(r){r=Array.isArray(r)&&r.length===1?r[0]:r;var t=Array.isArray(r)?"one of ".concat(r.join(", ")):r;return{code:ft,message:"File type must be ".concat(t)}},Ze=function(r){return{code:pt,message:"File is larger than ".concat(r," ").concat(r===1?"byte":"bytes")}},er=function(r){return{code:dt,message:"File is smaller than ".concat(r," ").concat(r===1?"byte":"bytes")}},yt={code:gt,message:"Too many files"};function br(e,r){var t=e.type==="application/x-moz-file"||it(e,r);return[t,t?null:mt(r)]}function Dr(e,r,t){if(K(e.size))if(K(r)&&K(t)){if(e.size>t)return[!1,Ze(t)];if(e.size<r)return[!1,er(r)]}else{if(K(r)&&e.size<r)return[!1,er(r)];if(K(t)&&e.size>t)return[!1,Ze(t)]}return[!0,null]}function K(e){return e!=null}function vt(e){var r=e.files,t=e.accept,n=e.minSize,o=e.maxSize,i=e.multiple,s=e.maxFiles;return!i&&r.length>1||i&&s>=1&&r.length>s?!1:r.every(function(u){var l=br(u,t),p=Qe(l,1),y=p[0],v=Dr(u,n,o),w=Qe(v,1),h=w[0];return y&&h})}function ee(e){return typeof e.isPropagationStopped=="function"?e.isPropagationStopped():typeof e.cancelBubble!="undefined"?e.cancelBubble:!1}function X(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(r){return r==="Files"||r==="application/x-moz-file"}):!!e.target&&!!e.target.files}function rr(e){e.preventDefault()}function ht(e){return e.indexOf("MSIE")!==-1||e.indexOf("Trident/")!==-1}function bt(e){return e.indexOf("Edge/")!==-1}function Dt(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return ht(e)||bt(e)}function O(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return function(n){for(var o=arguments.length,i=new Array(o>1?o-1:0),s=1;s<o;s++)i[s-1]=arguments[s];return r.some(function(u){return!ee(n)&&u&&u.apply(void 0,[n].concat(i)),ee(n)})}}function At(){return"showOpenFilePicker"in window}function Et(e){return e=typeof e=="string"?e.split(","):e,[{description:"everything",accept:Array.isArray(e)?e.filter(function(r){return r==="audio/*"||r==="video/*"||r==="image/*"||r==="text/*"||/\w+\/[-+.\w]+/g.test(r)}).reduce(function(r,t){return Je(Je({},r),{},hr({},t,[]))},{}):{}}]}function xt(e){return e instanceof DOMException&&(e.name==="AbortError"||e.code===e.ABORT_ERR)}function Ft(e){return e instanceof DOMException&&(e.name==="SecurityError"||e.code===e.SECURITY_ERR)}var wt=["children"],Ct=["open"],Ot=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],Pt=["refKey","onChange","onClick"];function jt(e){return Tt(e)||_t(e)||Ar(e)||kt()}function kt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _t(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Tt(e){if(Array.isArray(e))return De(e)}function he(e,r){return It(e)||Rt(e,r)||Ar(e,r)||St()}function St(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ar(e,r){if(!!e){if(typeof e=="string")return De(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return De(e,r)}}function De(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function Rt(e,r){var t=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var n=[],o=!0,i=!1,s,u;try{for(t=t.call(e);!(o=(s=t.next()).done)&&(n.push(s.value),!(r&&n.length===r));o=!0);}catch(l){i=!0,u=l}finally{try{!o&&t.return!=null&&t.return()}finally{if(i)throw u}}return n}}function It(e){if(Array.isArray(e))return e}function tr(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),t.push.apply(t,n)}return t}function m(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?tr(Object(t),!0).forEach(function(n){Ae(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):tr(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function Ae(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function re(e,r){if(e==null)return{};var t=Lt(e,r),n,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],!(r.indexOf(n)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,n)||(t[n]=e[n]))}return t}function Lt(e,r){if(e==null)return{};var t={},n=Object.keys(e),o,i;for(i=0;i<n.length;i++)o=n[i],!(r.indexOf(o)>=0)&&(t[o]=e[o]);return t}var xe=c.exports.forwardRef(function(e,r){var t=e.children,n=re(e,wt),o=xr(n),i=o.open,s=re(o,Ct);return c.exports.useImperativeHandle(r,function(){return{open:i}},[i]),d(ir,{children:t(m(m({},s),{},{open:i}))})});xe.displayName="Dropzone";var Er={disabled:!1,getFilesFromEvent:Qr,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0};xe.defaultProps=Er;xe.propTypes={children:g.func,accept:g.oneOfType([g.string,g.arrayOf(g.string)]),multiple:g.bool,preventDropOnDocument:g.bool,noClick:g.bool,noKeyboard:g.bool,noDrag:g.bool,noDragEventsBubbling:g.bool,minSize:g.number,maxSize:g.number,maxFiles:g.number,disabled:g.bool,getFilesFromEvent:g.func,onFileDialogCancel:g.func,onFileDialogOpen:g.func,useFsAccessApi:g.bool,onDragEnter:g.func,onDragLeave:g.func,onDragOver:g.func,onDrop:g.func,onDropAccepted:g.func,onDropRejected:g.func,validator:g.func};var Ee={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]};function xr(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=m(m({},Er),e),t=r.accept,n=r.disabled,o=r.getFilesFromEvent,i=r.maxSize,s=r.minSize,u=r.multiple,l=r.maxFiles,p=r.onDragEnter,y=r.onDragLeave,v=r.onDragOver,w=r.onDrop,h=r.onDropAccepted,C=r.onDropRejected,j=r.onFileDialogCancel,N=r.onFileDialogOpen,we=r.useFsAccessApi,ne=r.preventDropOnDocument,Ce=r.noClick,oe=r.noKeyboard,Oe=r.noDrag,_=r.noDragEventsBubbling,ae=r.validator,ie=c.exports.useMemo(function(){return typeof N=="function"?N:nr},[N]),H=c.exports.useMemo(function(){return typeof j=="function"?j:nr},[j]),E=c.exports.useRef(null),x=c.exports.useRef(null),Cr=c.exports.useReducer(zt,Ee),Pe=he(Cr,2),V=Pe[0],A=Pe[1],Or=V.isFocused,je=V.isFileDialogActive,ke=V.draggedFiles,U=c.exports.useRef(typeof window!="undefined"&&window.isSecureContext&&we&&At()),_e=function(){!U.current&&je&&setTimeout(function(){if(x.current){var f=x.current.files;f.length||(A({type:"closeDialog"}),H())}},300)};c.exports.useEffect(function(){return window.addEventListener("focus",_e,!1),function(){window.removeEventListener("focus",_e,!1)}},[x,je,H,U]);var S=c.exports.useRef([]),Te=function(f){E.current&&E.current.contains(f.target)||(f.preventDefault(),S.current=[])};c.exports.useEffect(function(){return ne&&(document.addEventListener("dragover",rr,!1),document.addEventListener("drop",Te,!1)),function(){ne&&(document.removeEventListener("dragover",rr),document.removeEventListener("drop",Te))}},[E,ne]);var Se=c.exports.useCallback(function(a){a.preventDefault(),a.persist(),J(a),S.current=[].concat(jt(S.current),[a.target]),X(a)&&Promise.resolve(o(a)).then(function(f){ee(a)&&!_||(A({draggedFiles:f,isDragActive:!0,type:"setDraggedFiles"}),p&&p(a))})},[o,p,_]),Re=c.exports.useCallback(function(a){a.preventDefault(),a.persist(),J(a);var f=X(a);if(f&&a.dataTransfer)try{a.dataTransfer.dropEffect="copy"}catch{}return f&&v&&v(a),!1},[v,_]),Ie=c.exports.useCallback(function(a){a.preventDefault(),a.persist(),J(a);var f=S.current.filter(function(D){return E.current&&E.current.contains(D)}),b=f.indexOf(a.target);b!==-1&&f.splice(b,1),S.current=f,!(f.length>0)&&(A({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),X(a)&&y&&y(a))},[E,y,_]),Y=c.exports.useCallback(function(a,f){var b=[],D=[];a.forEach(function(F){var $=br(F,t),L=he($,2),se=L[0],ce=L[1],le=Dr(F,s,i),Q=he(le,2),fe=Q[0],pe=Q[1],de=ae?ae(F):null;if(se&&fe&&!de)b.push(F);else{var ge=[ce,pe];de&&(ge=ge.concat(de)),D.push({file:F,errors:ge.filter(function(Tr){return Tr})})}}),(!u&&b.length>1||u&&l>=1&&b.length>l)&&(b.forEach(function(F){D.push({file:F,errors:[yt]})}),b.splice(0)),A({acceptedFiles:b,fileRejections:D,type:"setFiles"}),w&&w(b,D,f),D.length>0&&C&&C(D,f),b.length>0&&h&&h(b,f)},[A,u,t,s,i,l,w,h,C,ae]),G=c.exports.useCallback(function(a){a.preventDefault(),a.persist(),J(a),S.current=[],X(a)&&Promise.resolve(o(a)).then(function(f){ee(a)&&!_||Y(f,a)}),A({type:"reset"})},[o,Y,_]),R=c.exports.useCallback(function(){if(U.current){A({type:"openDialog"}),ie();var a={multiple:u,types:Et(t)};window.showOpenFilePicker(a).then(function(f){return o(f)}).then(function(f){Y(f,null),A({type:"closeDialog"})}).catch(function(f){xt(f)?(H(f),A({type:"closeDialog"})):Ft(f)&&(U.current=!1,x.current&&(x.current.value=null,x.current.click()))});return}x.current&&(A({type:"openDialog"}),ie(),x.current.value=null,x.current.click())},[A,ie,H,we,Y,t,u]),Le=c.exports.useCallback(function(a){!E.current||!E.current.isEqualNode(a.target)||(a.key===" "||a.key==="Enter"||a.keyCode===32||a.keyCode===13)&&(a.preventDefault(),R())},[E,R]),ze=c.exports.useCallback(function(){A({type:"focus"})},[]),Be=c.exports.useCallback(function(){A({type:"blur"})},[]),Me=c.exports.useCallback(function(){Ce||(Dt()?setTimeout(R,0):R())},[Ce,R]),I=function(f){return n?null:f},ue=function(f){return oe?null:I(f)},q=function(f){return Oe?null:I(f)},J=function(f){_&&f.stopPropagation()},Pr=c.exports.useMemo(function(){return function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},f=a.refKey,b=f===void 0?"ref":f,D=a.role,F=a.onKeyDown,$=a.onFocus,L=a.onBlur,se=a.onClick,ce=a.onDragEnter,le=a.onDragOver,Q=a.onDragLeave,fe=a.onDrop,pe=re(a,Ot);return m(m(Ae({onKeyDown:ue(O(F,Le)),onFocus:ue(O($,ze)),onBlur:ue(O(L,Be)),onClick:I(O(se,Me)),onDragEnter:q(O(ce,Se)),onDragOver:q(O(le,Re)),onDragLeave:q(O(Q,Ie)),onDrop:q(O(fe,G)),role:typeof D=="string"&&D!==""?D:"button"},b,E),!n&&!oe?{tabIndex:0}:{}),pe)}},[E,Le,ze,Be,Me,Se,Re,Ie,G,oe,Oe,n]),jr=c.exports.useCallback(function(a){a.stopPropagation()},[]),kr=c.exports.useMemo(function(){return function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},f=a.refKey,b=f===void 0?"ref":f,D=a.onChange,F=a.onClick,$=re(a,Pt),L=Ae({accept:t,multiple:u,type:"file",style:{display:"none"},onChange:I(O(D,G)),onClick:I(O(F,jr)),autoComplete:"off",tabIndex:-1},b,x);return m(m({},L),$)}},[x,t,u,G,n]),$e=ke.length,Ke=$e>0&&vt({files:ke,accept:t,minSize:s,maxSize:i,multiple:u,maxFiles:l}),_r=$e>0&&!Ke;return m(m({},V),{},{isDragAccept:Ke,isDragReject:_r,isFocused:Or&&!n,getRootProps:Pr,getInputProps:kr,rootRef:E,inputRef:x,open:I(R)})}function zt(e,r){switch(r.type){case"focus":return m(m({},e),{},{isFocused:!0});case"blur":return m(m({},e),{},{isFocused:!1});case"openDialog":return m(m({},Ee),{},{isFileDialogActive:!0});case"closeDialog":return m(m({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":var t=r.isDragActive,n=r.draggedFiles;return m(m({},e),{},{draggedFiles:n,isDragActive:t});case"setFiles":return m(m({},e),{},{acceptedFiles:r.acceptedFiles,fileRejections:r.fileRejections});case"reset":return m({},Ee);default:return e}}function nr(){}function Bt(e,r,t){const[n,o]=c.exports.useState(null),[i,s]=c.exports.useState(null),u=te();return c.exports.useEffect(()=>{const l=u.newRoomInstance(e,r);o(l),l.on("change",y=>s(y));async function p(){await l.connect(),await l.init();const y=Math.random().toString(32).substring(2);l.enter(y,t)}return p(),()=>{l==null||l.close(),o(null)}},[u,t,r,e]),{room:n,state:i}}function Mt(e,r,t){const[n,o]=c.exports.useState(!1),[i,s]=c.exports.useState(!1),[u,l]=c.exports.useState(!1),p=c.exports.useMemo(()=>new Audio(`${t}${r.url}`),[r.url,t]);c.exports.useEffect(()=>{const h=()=>o(!0),C=()=>l(!0),j=()=>l(!1);return p.addEventListener("canplay",h),p.addEventListener("play",C),p.addEventListener("pause",j),(async()=>{try{await p.play(),p.pause(),s(!1)}catch{s(!0)}})(),()=>{p.removeEventListener("canplay",h),p.removeEventListener("play",C),p.removeEventListener("pause",j)}},[p]),c.exports.useEffect(()=>{const h=async({audioId:C})=>{if(C===r.id){console.log("Play:",r.id,r.name);try{await p.play(),s(!1)}catch{s(!0)}}};return e.on("play",h),()=>{e.off("play",h)}},[r.id,r.name,p,e]);const y=c.exports.useCallback(async()=>{try{await p.play(),p.pause(),s(!1)}catch(h){console.error(h),s(!0)}},[p]),v=c.exports.useCallback(()=>{e.play(r.id)},[r.id,e]),w=c.exports.useCallback(()=>{u&&(p.pause(),p.currentTime=0)},[u,p]);return{isRejected:i,onAllow:y,isPlayable:n,isPlaying:u,onPlay:v,onPause:w}}function $t(){const e=te(),[r,t]=c.exports.useState(!1),n=c.exports.useCallback(async(i,s)=>{try{return await lr(async()=>(await e.addAudio(i,s,s.name),{ok:!0}),{retries:4})}catch(u){return console.error(u),u instanceof ur?{ok:!1,reason:"other-error"}:u instanceof sr?{ok:!1,reason:"connection-error"}:{ok:!1,reason:"other-error"}}},[e]);return[c.exports.useCallback(async(i,s)=>{t(!0);const u=s.map(y=>n(i,y)),l=await Promise.all(u);return t(!1),l.every(y=>y.ok)?{ok:!0}:{ok:!1,results:l}},[n]),r]}function Kt(){const e=te(),[r,t]=c.exports.useState(!1);return[c.exports.useCallback(async(o,i)=>{t(!0);try{return await lr(async()=>(await e.removeAudio(o,i),{ok:!0}),{retries:4})}catch(s){return console.error(s),s instanceof ur?{ok:!1,reason:"other-error"}:s instanceof sr?{ok:!1,reason:"connection-error"}:{ok:!1,reason:"other-error"}}finally{t(!1)}},[e]),r]}function Wt({roomId:e}){const[r]=$t(),t=fr(),{getRootProps:n,getInputProps:o,isDragAccept:i}=xr({accept:"audio/*",async onDrop(s){const u=await r(e,s);if(!u.ok){const l=u.results.some(p=>!p.ok&&p.reason==="other-error");t(l?{description:"\u4E0D\u660E\u306A\u30A8\u30E9\u30FC\u304C\u767A\u751F\u3057\u307E\u3057\u305F\u3002\u3057\u3070\u3089\u304F\u7D4C\u3063\u3066\u304B\u3089\u518D\u5EA6\u304A\u8A66\u3057\u304F\u3060\u3055\u3044\u3002"}:{description:"\u63A5\u7D9A\u30A8\u30E9\u30FC\u304C\u767A\u751F\u3057\u307E\u3057\u305F\u3002\u3057\u3070\u3089\u304F\u7D4C\u3063\u3066\u304B\u3089\u518D\u5EA6\u304A\u8A66\u3057\u304F\u3060\u3055\u3044\u3002"})}}});return P(z,He(me({},n()),{borderWidth:"1px",borderColor:i?"blue.500":"gray.200",borderRadius:"md",p:"4",textAlign:"center",bgColor:"gray.50",color:"gray.400",children:[d("input",me({},o())),P("p",{children:["\u52B9\u679C\u97F3\u3092\u8FFD\u52A0\u3059\u308B\u306B\u306F\u3001",d("br",{}),"\u3053\u306E\u30A8\u30EA\u30A2\u306B\u30D5\u30A1\u30A4\u30EB\u3092\u30C9\u30E9\u30C3\u30B0&\u30C9\u30ED\u30C3\u30D7\u3057\u3066\u304F\u3060\u3055\u3044"]})]}))}function Nt({me:e,members:r}){return d(z,{as:"ul",children:r.map(t=>P("li",{children:[t.nickname,t.id===(e==null?void 0:e.id)?d("span",{children:"ME"}):null]},t.id))})}var Fr={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},or=T.createContext&&T.createContext(Fr),k=globalThis&&globalThis.__assign||function(){return k=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},k.apply(this,arguments)},Ht=globalThis&&globalThis.__rest||function(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)r.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(t[n[o]]=e[n[o]]);return t};function wr(e){return e&&e.map(function(r,t){return T.createElement(r.tag,k({key:t},r.attr),wr(r.child))})}function Fe(e){return function(r){return T.createElement(Vt,k({attr:k({},e.attr)},r),wr(e.child))}}function Vt(e){var r=function(t){var n=e.attr,o=e.size,i=e.title,s=Ht(e,["attr","size","title"]),u=o||t.size||"1em",l;return t.className&&(l=t.className),e.className&&(l=(l?l+" ":"")+e.className),T.createElement("svg",k({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,n,s,{className:l,style:k(k({color:e.color||t.color},t.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),i&&T.createElement("title",null,i),e.children)};return or!==void 0?T.createElement(or.Consumer,null,function(t){return r(t)}):r(Fr)}function Ut(e){return Fe({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zM124 296c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h264c6.6 0 12 5.4 12 12v56c0 6.6-5.4 12-12 12H124z"}}]})(e)}function Yt(e){return Fe({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M144 479H48c-26.5 0-48-21.5-48-48V79c0-26.5 21.5-48 48-48h96c26.5 0 48 21.5 48 48v352c0 26.5-21.5 48-48 48zm304-48V79c0-26.5-21.5-48-48-48h-96c-26.5 0-48 21.5-48 48v352c0 26.5 21.5 48 48 48h96c26.5 0 48-21.5 48-48z"}}]})(e)}function Gt(e){return Fe({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"}}]})(e)}function qt({room:e,roomId:r,audios:t,isEditing:n=!1}){return d(z,{as:"ul",listStyleType:"none",children:t.map(o=>d(z,{as:"li",children:d(Jt,{room:e,roomId:r,audio:o,isEditing:n})},o.id))})}function Jt({room:e,roomId:r,audio:t,isEditing:n}){const o=te(),{isRejected:i,onAllow:s,isPlaying:u,isPlayable:l,onPause:p,onPlay:y}=Mt(e,t,o.baseUrl),[v,w]=Kt(),h=fr(),C=c.exports.useCallback(async()=>{const j=await v(r,t.id);if(!j.ok)switch(j.reason){case"connection-error":h({description:"\u63A5\u7D9A\u30A8\u30E9\u30FC\u304C\u767A\u751F\u3057\u307E\u3057\u305F\u3002\u3057\u3070\u3089\u304F\u7D4C\u3063\u3066\u304B\u3089\u518D\u5EA6\u304A\u8A66\u3057\u304F\u3060\u3055\u3044\u3002"});break;case"other-error":h({description:"\u4E0D\u660E\u306A\u30A8\u30E9\u30FC\u304C\u767A\u751F\u3057\u307E\u3057\u305F\u3002\u3057\u3070\u3089\u304F\u7D4C\u3063\u3066\u304B\u3089\u518D\u5EA6\u304A\u8A66\u3057\u304F\u3060\u3055\u3044\u3002"});break}},[t.id,v,r,h]);return P(cr,{justifyContent:"space-between",alignItems:"center",h:"10",children:[n?d(Ve,{size:"sm",icon:d(Ut,{}),variant:"ghost",colorScheme:"red","aria-label":"\u524A\u9664",isLoading:w,onClick:C}):d(Ve,{size:"sm",icon:u?d(Yt,{}):d(Gt,{}),"aria-label":"\u518D\u751F",disabled:i||w,isLoading:!l,onClick:u?p:y}),d(z,{ml:"2",children:t.name}),d(Br,{}),!n&&i?d(pr,{size:"sm",onClick:s,children:"\u518D\u751F\u3092\u8A31\u53EF\u3059\u308B"}):null]})}function an(){const{roomId:e}=Mr();Xt(e,"roomId");const r=Ue("nickname"),t=Ue(`passcodes.${e}`);return!r||!t?d($r,{to:`/enter?r=${e}`}):d(Qt,{roomId:e,passcode:t,nickname:r})}function Qt({roomId:e,passcode:r,nickname:t}){var l;const{room:n,state:o}=Bt(e,r,t),[i,s,u]=Zt(!1);return c.exports.useEffect(()=>{var p;((p=o==null?void 0:o.room)==null?void 0:p.audios.length)===0&&i&&u(!1)},[i,u,(l=o==null?void 0:o.room)==null?void 0:l.audios.length,s]),!n||!o||!o.me||!o.room?d(ir,{children:"Loading..."}):d(Kr,{children:P(ye,{spacing:"8",alignItems:"stretch",children:[P(ve,{children:["\u30EB\u30FC\u30E0: ",o.room.name]}),P(z,{as:"dl",children:[d("dt",{children:"ID"}),d("dd",{children:o.room.id}),d("dt",{children:"\u30D1\u30B9\u30B3\u30FC\u30C9"}),d("dd",{children:o.room.passcode})]}),P(ye,{spacing:"4",alignItems:"stretch",children:[d(ve,{size:"sm",children:"\u30E1\u30F3\u30D0\u30FC"}),o.room.members.length===0?d(ar,{children:"\u30E1\u30F3\u30D0\u30FC\u306F\u3044\u307E\u305B\u3093"}):d(Nt,{me:o.me,members:o.room.members})]}),P(ye,{spacing:"4",alignItems:"stretch",children:[P(cr,{justifyContent:"space-between",alignItems:"center",children:[d(ve,{size:"sm",children:"\u52B9\u679C\u97F3"}),d(pr,{variant:"outline",size:"xs",colorScheme:"blackAlpha",disabled:o.room.audios.length===0,onClick:s,children:i?"\u7DE8\u96C6\u306E\u7D42\u4E86":"\u7DE8\u96C6"})]}),o.room.audios.length===0?d(ar,{children:"\u52B9\u679C\u97F3\u306F\u3042\u308A\u307E\u305B\u3093"}):d(qt,{room:n,roomId:e,audios:o.room.audios,isEditing:i}),d(Wt,{roomId:e})]})]})})}function ar({children:e}){return d(Wr,{p:"8",borderWidth:"1px",borderColor:"gray.200",children:e})}function Xt(e,r){if(e===void 0)throw new Error(`The ${r} is undefined`)}function Zt(e){const[r,t]=c.exports.useState(e),n=c.exports.useCallback(()=>{t(o=>!o)},[]);return[r,n,t]}export{an as default};
